from datetime import datetime, timedelta
import random
import threading
import time
from zlapi.models import *
import pytz
import requests
from config import *
from modules.func_bot_info import get_user_name_by_id, read_settings, write_settings


time_poems = {
    "01:00": [
        "ğŸŒ™âœ¨ ÄÃªm khuya váº¯ng, giáº¥c mÆ¡ Ä‘Ã¢y, ngá»§ ngon nhÃ©!",
        "ğŸŒŒğŸ’¤ GiÃ³ láº¡nh ru, lÃ²ng nháº¹ bay, nghá»‰ thÃ´i nÃ o!",
        "ğŸŒƒâ„ï¸ 1 giá» sÃ¡ng, chÄƒn áº¥m Ä‘áº§y, mÆ¡ Ä‘áº¹p nha!",
        "ğŸŒœğŸŒ  TrÄƒng má» áº£o, giáº¥c mÆ¡ bay, ngá»§ tháº­t sÃ¢u!",
        "âœ¨ğŸŒ™ ÄÃªm sÃ¢u láº¯ng, máº¯t nháº¯m ngay, nghá»‰ ngÆ¡i nÃ o!",
        "ğŸŒŒğŸ’« Sao lung linh, Ä‘Ãªm yÃªn Ä‘Ã¢y, ngá»§ ngon thÃ´i!",
        "ğŸŒƒğŸŒ¬ï¸ Khuya tÄ©nh láº·ng, giáº¥c mÆ¡ Ä‘áº§y, nghá»‰ ngÆ¡i nhÃ©!",
        "ğŸŒ™â„ï¸ ÄÃªm láº¡nh láº¯m, chÄƒn kÃ©o Ä‘Ã¢y, mÆ¡ Ä‘áº¹p nÃ o!",
        "ğŸŒ âœ¨ TrÄƒng dá»‹u dÃ ng, lÃ²ng nháº¹ bay, ngá»§ tháº­t sÃ¢u!",
        "ğŸŒœğŸŒŒ 1 giá» rá»“i, Ä‘á»«ng thá»©c ná»¯a, nghá»‰ thÃ´i nha!",
        "âœ¨ğŸ’¤ ÄÃªm yÃªn bÃ¬nh, giáº¥c mÆ¡ Ä‘Ã¢y, ngá»§ ngon nhÃ©!",
        "ğŸŒ™ğŸŒ  GiÃ³ khuya láº¡nh, máº¯t nháº¯m Ä‘áº§y, nghá»‰ ngÆ¡i thÃ´i!",
        "ğŸŒŒâ„ï¸ ÄÃªm sÃ¢u tháº³m, chÄƒn áº¥m bay, mÆ¡ Ä‘áº¹p nha!",
        "ğŸŒƒâœ¨ Khuya váº¯ng váº», lÃ²ng nháº¹ Ä‘Ã¢y, ngá»§ tháº­t sÃ¢u!",
        "ğŸŒœğŸ’« TrÄƒng láº·ng láº½, giáº¥c mÆ¡ Ä‘áº§y, nghá»‰ ngÆ¡i nÃ o!"
    ],
    "02:30": [
        "ğŸŒ™ğŸŒŒ Khuya láº¡nh láº¯m, giáº¥c mÆ¡ Ä‘Ã¢y, ngá»§ ngon nhÃ©!",
        "ğŸŒƒâœ¨ ÄÃªm sÃ¢u láº¯ng, chÄƒn kÃ©o ngay, nghá»‰ thÃ´i nÃ o!",
        "ğŸŒœğŸ’¤ GiÃ³ khuya ru, lÃ²ng nháº¹ bay, mÆ¡ Ä‘áº¹p nha!",
        "ğŸŒ â„ï¸ 2 rÆ°á»¡i sÃ¡ng, máº¯t nháº¯m Ä‘áº§y, ngá»§ tháº­t sÃ¢u!",
        "âœ¨ğŸŒ™ ÄÃªm tÄ©nh láº·ng, giáº¥c mÆ¡ bay, nghá»‰ ngÆ¡i thÃ´i!",
        "ğŸŒŒğŸ’« Sao láº¥p lÃ¡nh, chÄƒn áº¥m Ä‘Ã¢y, ngá»§ ngon nÃ o!",
        "ğŸŒƒğŸŒ¬ï¸ Khuya yÃªn bÃ¬nh, giáº¥c mÆ¡ Ä‘áº§y, nghá»‰ ngÆ¡i nhÃ©!",
        "ğŸŒ™â„ï¸ ÄÃªm sÃ¢u tháº³m, lÃ²ng nháº¹ bay, mÆ¡ Ä‘áº¹p thÃ´i!",
        "ğŸŒ âœ¨ TrÄƒng má» áº£o, giáº¥c mÆ¡ Ä‘Ã¢y, ngá»§ tháº­t sÃ¢u!",
        "ğŸŒœğŸŒŒ 2 giá» hÆ¡n, Ä‘á»«ng thá»©c ná»¯a, nghá»‰ ngÆ¡i nha!",
        "âœ¨ğŸ’¤ ÄÃªm láº¡nh láº¯m, chÄƒn kÃ©o Ä‘áº§y, ngá»§ ngon nhÃ©!",
        "ğŸŒ™ğŸŒ  GiÃ³ hÃ¡t ru, giáº¥c mÆ¡ bay, nghá»‰ thÃ´i nÃ o!",
        "ğŸŒŒâ„ï¸ Khuya tÄ©nh láº·ng, máº¯t nháº¯m Ä‘Ã¢y, mÆ¡ Ä‘áº¹p nha!",
        "ğŸŒƒâœ¨ ÄÃªm sÃ¢u láº¯ng, lÃ²ng nháº¹ Ä‘áº§y, ngá»§ tháº­t sÃ¢u!"
    ],
    "04:00": [
        "ğŸŒƒğŸŒ™ ÄÃªm khuya láº¡nh, giáº¥c mÆ¡ Ä‘Ã¢y, ngá»§ ngon nhÃ©!",
        "ğŸŒœâœ¨ 4 giá» sÃ¡ng, chÄƒn áº¥m bay, nghá»‰ thÃ´i nÃ o!",
        "ğŸŒŒğŸ’¤ GiÃ³ láº¡nh ru, lÃ²ng nháº¹ Ä‘áº§y, mÆ¡ Ä‘áº¹p nha!",
        "ğŸŒ â„ï¸ ÄÃªm tÄ©nh láº·ng, máº¯t nháº¯m ngay, ngá»§ tháº­t sÃ¢u!",
        "âœ¨ğŸŒ™ TrÄƒng má» áº£o, giáº¥c mÆ¡ bay, nghá»‰ ngÆ¡i thÃ´i!",
        "ğŸŒƒğŸ’« Sao lung linh, chÄƒn kÃ©o Ä‘Ã¢y, ngá»§ ngon nÃ o!",
        "ğŸŒ™ğŸŒ¬ï¸ Khuya yÃªn bÃ¬nh, giáº¥c mÆ¡ Ä‘áº§y, nghá»‰ ngÆ¡i nhÃ©!",
        "ğŸŒŒâ„ï¸ ÄÃªm sÃ¢u tháº³m, lÃ²ng nháº¹ bay, mÆ¡ Ä‘áº¹p thÃ´i!",
        "ğŸŒ âœ¨ TrÄƒng láº·ng láº½, giáº¥c mÆ¡ Ä‘Ã¢y, ngá»§ tháº­t sÃ¢u!",
        "ğŸŒœğŸŒŒ 4 giá» rá»“i, Ä‘á»«ng thá»©c ná»¯a, nghá»‰ ngÆ¡i nha!",
        "âœ¨ğŸ’¤ ÄÃªm láº¡nh láº¯m, chÄƒn áº¥m Ä‘áº§y, ngá»§ ngon nhÃ©!",
        "ğŸŒ™ğŸŒ  GiÃ³ khuya ru, giáº¥c mÆ¡ bay, nghá»‰ thÃ´i nÃ o!",
        "ğŸŒŒâ„ï¸ Khuya tÄ©nh láº·ng, máº¯t nháº¯m Ä‘Ã¢y, mÆ¡ Ä‘áº¹p nha!",
        "ğŸŒƒâœ¨ ÄÃªm sÃ¢u láº¯ng, lÃ²ng nháº¹ Ä‘áº§y, ngá»§ tháº­t sÃ¢u!"
    ],
    "05:30": [
        "ğŸŒ…â˜€ï¸ BÃ¬nh minh gáº§n, giáº¥c mÆ¡ Ä‘Ã¢y, dáº­y thÃ´i nÃ o!",
        "â˜€ï¸âœ¨ SÃ¡ng nháº¹ nhÃ ng, nÄƒng lÆ°á»£ng bay, chÃ o ngÃ y nhÃ©!",
        "ğŸŒğŸ’« 5 rÆ°á»¡i sÃ¡ng, lÃ²ng hÄƒng say, khá»Ÿi Ä‘áº§u thÃ´i!",
        "ğŸŒ»â€ Náº¯ng ban mai, giáº¥c mÆ¡ Ä‘áº§y, dáº­y tháº­t nhanh!",
        "âœ¨ğŸŒ… SÃ¡ng tÆ°Æ¡i má»›i, tinh tháº§n bay, chÃ o buá»•i sÃ¡ng!",
        "â˜€ï¸ğŸŒ¬ï¸ GiÃ³ mÃ¡t lÃ nh, nÄƒng lÆ°á»£ng Ä‘Ã¢y, báº¯t Ä‘áº§u nÃ o!",
        "ğŸŒğŸŒˆ BÃ¬nh minh ráº¡ng, giáº¥c mÆ¡ bay, dáº­y Ä‘i thÃ´i!",
        "ğŸŒ…ğŸ’¤ SÃ¡ng lung linh, lÃ²ng nháº¹ Ä‘áº§y, chÃ o ngÃ y nhÃ©!",
        "â˜€ï¸ğŸŒ» Náº¯ng dá»‹u dÃ ng, tinh tháº§n bay, khá»Ÿi Ä‘áº§u thÃ´i!",
        "âœ¨ğŸŒ 5 giá» hÆ¡n, ngÃ y má»›i Ä‘Ã¢y, dáº­y tháº­t nhanh!",
        "ğŸŒ…â€ SÃ¡ng rá»±c rá»¡, giáº¥c mÆ¡ Ä‘áº§y, chÃ o buá»•i sÃ¡ng!",
        "â˜€ï¸ğŸŒ¬ï¸ Náº¯ng ban mai, lÃ²ng hÄƒng say, báº¯t Ä‘áº§u nÃ o!",
        "ğŸŒğŸ’« SÃ¡ng tÆ°Æ¡i Ä‘áº¹p, nÄƒng lÆ°á»£ng bay, dáº­y Ä‘i nhÃ©!",
        "ğŸŒ»âœ¨ GiÃ³ mÃ¡t sÃ¡ng, giáº¥c mÆ¡ Ä‘Ã¢y, chÃ o ngÃ y thÃ´i!"
    ],
    "07:00": [
        "ğŸŒâ˜€ï¸ SÃ¡ng rá»±c rá»¡, ngÃ y má»›i Ä‘Ã¢y, dáº­y thÃ´i nÃ o!",
        "â˜€ï¸âœ¨ 7 giá» sÃ¡ng, náº¯ng lung lay, chÃ o buá»•i sÃ¡ng!",
        "ğŸŒ…ğŸ’« Má»™t ngÃ y má»›i, lÃ²ng hÄƒng say, báº¯t Ä‘áº§u thÃ´i!",
        "ğŸŒ»â€ Náº¯ng ban mai, giáº¥c mÆ¡ Ä‘áº§y, dáº­y tháº­t nhanh!",
        "âœ¨ğŸŒ SÃ¡ng tÆ°Æ¡i Ä‘áº¹p, nÄƒng lÆ°á»£ng bay, chÃ o ngÃ y má»›i!",
        "â˜€ï¸ğŸŒ¬ï¸ GiÃ³ mÃ¡t lÃ nh, tinh tháº§n Ä‘Ã¢y, khá»Ÿi Ä‘áº§u nÃ o!",
        "ğŸŒğŸŒˆ BÃ¬nh minh ráº¡ng, giáº¥c mÆ¡ bay, dáº­y Ä‘i thÃ´i!",
        "ğŸŒ…ğŸ’¤ SÃ¡ng lung linh, lÃ²ng nháº¹ Ä‘áº§y, chÃ o ngÃ y nhÃ©!",
        "â˜€ï¸ğŸŒ» Náº¯ng dá»‹u dÃ ng, tinh tháº§n bay, báº¯t Ä‘áº§u thÃ´i!",
        "âœ¨ğŸŒ 7 giá» rá»“i, ngÃ y má»›i Ä‘Ã¢y, dáº­y tháº­t nhanh!",
        "ğŸŒ…â€ SÃ¡ng rá»±c rá»¡, giáº¥c mÆ¡ Ä‘áº§y, chÃ o buá»•i sÃ¡ng!",
        "â˜€ï¸ğŸŒ¬ï¸ Náº¯ng ban mai, lÃ²ng hÄƒng say, báº¯t Ä‘áº§u nÃ o!",
        "ğŸŒğŸ’« SÃ¡ng tÆ°Æ¡i Ä‘áº¹p, nÄƒng lÆ°á»£ng bay, dáº­y Ä‘i nhÃ©!",
        "ğŸŒ»âœ¨ GiÃ³ mÃ¡t sÃ¡ng, giáº¥c mÆ¡ Ä‘Ã¢y, chÃ o ngÃ y thÃ´i!"
    ],
    "08:30": [
        "ğŸŒâ˜• SÃ¡ng hiá»‡u quáº£, cÃ´ng viá»‡c Ä‘Ã¢y, cá»‘ lÃªn nÃ o!",
        "â˜•âœ¨ 8 rÆ°á»¡i sÃ¡ng, tinh tháº§n bay, lÃ m viá»‡c thÃ´i!",
        "ğŸŒ»ğŸ’« Náº¯ng ban mai, nÄƒng lÆ°á»£ng Ä‘áº§y, báº¯t Ä‘áº§u nhÃ©!",
        "âœ¨ğŸŒ SÃ¡ng rá»±c rá»¡, lÃ²ng hÄƒng say, lÃ m tháº­t tá»‘t!",
        "â˜€ï¸ğŸŒ¬ï¸ GiÃ³ mÃ¡t lÃ nh, giáº¥c mÆ¡ bay, hiá»‡u quáº£ nÃ o!",
        "ğŸŒ…â€ Náº¯ng dá»‹u dÃ ng, tinh tháº§n Ä‘Ã¢y, lÃ m viá»‡c thÃ´i!",
        "ğŸŒğŸŒˆ 8 giá» hÆ¡n, cÃ´ng viá»‡c Ä‘áº§y, cá»‘ lÃªn nhÃ©!",
        "â˜•ğŸ’¤ SÃ¡ng tÆ°Æ¡i má»›i, lÃ²ng nháº¹ bay, lÃ m tháº­t nhanh!",
        "âœ¨ğŸŒ» Náº¯ng lung linh, nÄƒng lÆ°á»£ng Ä‘Ã¢y, hiá»‡u quáº£ thÃ´i!",
        "â˜€ï¸ğŸŒ SÃ¡ng yÃªn bÃ¬nh, giáº¥c mÆ¡ Ä‘áº§y, lÃ m viá»‡c nÃ o!",
        "ğŸŒ…ğŸ’« GiÃ³ mÃ¡t sÃ¡ng, tinh tháº§n bay, cá»‘ lÃªn thÃ´i!",
        "ğŸŒâ€ Náº¯ng ban mai, lÃ²ng hÄƒng say, lÃ m tháº­t tá»‘t!",
        "â˜•âœ¨ SÃ¡ng rá»±c rá»¡, cÃ´ng viá»‡c Ä‘Ã¢y, hiá»‡u quáº£ nÃ o!"
    ],
    "10:06": [
        "ğŸŒâ° 10 giá» sÃ¡ng, nÄƒng lÆ°á»£ng Ä‘Ã¢y, lÃ m viá»‡c nÃ o!",
        "â˜€ï¸âœ¨ Náº¯ng rá»±c rá»¡, tinh tháº§n bay, cá»‘ lÃªn nhÃ©!",
        "ğŸŒ»ğŸ’« SÃ¡ng tÆ°Æ¡i má»›i, giáº¥c mÆ¡ Ä‘áº§y, hiá»‡u quáº£ thÃ´i!",
        "âœ¨ğŸŒ GiÃ³ mÃ¡t lÃ nh, lÃ²ng hÄƒng say, lÃ m tháº­t tá»‘t!",
        "â˜•â€ Náº¯ng dá»‹u dÃ ng, cÃ´ng viá»‡c Ä‘Ã¢y, báº¯t Ä‘áº§u nÃ o!",
        "ğŸŒ…ğŸŒˆ 10 giá» rá»“i, tinh tháº§n bay, lÃ m viá»‡c thÃ´i!",
        "ğŸŒğŸ’¤ SÃ¡ng lung linh, nÄƒng lÆ°á»£ng Ä‘áº§y, cá»‘ lÃªn nhÃ©!",
        "â˜€ï¸ğŸŒ» Náº¯ng ban mai, giáº¥c mÆ¡ bay, hiá»‡u quáº£ nÃ o!",
        "âœ¨â° SÃ¡ng yÃªn bÃ¬nh, lÃ²ng nháº¹ Ä‘Ã¢y, lÃ m tháº­t nhanh!",
        "ğŸŒâ€ GiÃ³ mÃ¡t sÃ¡ng, tinh tháº§n Ä‘áº§y, lÃ m viá»‡c thÃ´i!",
        "â˜•ğŸ’« Náº¯ng rá»±c rá»¡, cÃ´ng viá»‡c bay, cá»‘ lÃªn nÃ o!",
        "ğŸŒ…âœ¨ SÃ¡ng tÆ°Æ¡i Ä‘áº¹p, nÄƒng lÆ°á»£ng Ä‘Ã¢y, hiá»‡u quáº£ thÃ´i!"
    ],
    "11:30": [
        "ğŸŒğŸ½ï¸ Gáº§n trÆ°a rá»“i, nghá»‰ ngÆ¡i Ä‘Ã¢y, Äƒn ngon nhÃ©!",
        "â˜€ï¸âœ¨ 11 rÆ°á»¡i sÃ¡ng, giáº¥c mÆ¡ bay, nghá»‰ thÃ´i nÃ o!",
        "ğŸŒ»ğŸ’¤ Náº¯ng ban trÆ°a, lÃ²ng nháº¹ Ä‘áº§y, thÆ° giÃ£n thÃ´i!",
        "âœ¨â° TrÆ°a yÃªn bÃ¬nh, nÄƒng lÆ°á»£ng Ä‘Ã¢y, Äƒn tháº­t ngon!",
        "â˜•â€ GiÃ³ mÃ¡t lÃ nh, tinh tháº§n bay, nghá»‰ ngÆ¡i nÃ o!",
        "ğŸŒ…ğŸŒˆ Náº¯ng dá»‹u dÃ ng, giáº¥c mÆ¡ Ä‘áº§y, Äƒn ngon nhÃ©!",
        "ğŸŒğŸ’« 11 giá» hÆ¡n, bá»¥ng Ä‘Ã³i Ä‘Ã¢y, nghá»‰ thÃ´i nÃ o!",
        "â˜€ï¸ğŸŒ» TrÆ°a rá»±c rá»¡, mÃ³n ngon bay, thÆ° giÃ£n thÃ´i!",
        "âœ¨ğŸ½ï¸ Náº¯ng ban trÆ°a, lÃ²ng hÄƒng say, Äƒn tháº­t ngon!",
        "ğŸŒâ€ GiÃ³ mÃ¡t trÆ°a, giáº¥c mÆ¡ Ä‘Ã¢y, nghá»‰ ngÆ¡i nÃ o!"
    ],
    "13:00": [
        "ğŸŒâ° 1 giá» chiá»u, nÄƒng lÆ°á»£ng Ä‘Ã¢y, lÃ m viá»‡c nÃ o!",
        "â˜€ï¸âœ¨ Náº¯ng rá»±c rá»¡, tinh tháº§n bay, cá»‘ lÃªn nhÃ©!",
        "ğŸŒ»ğŸ’« Chiá»u tÆ°Æ¡i má»›i, giáº¥c mÆ¡ Ä‘áº§y, hiá»‡u quáº£ thÃ´i!",
        "âœ¨ğŸŒ GiÃ³ mÃ¡t lÃ nh, lÃ²ng hÄƒng say, lÃ m tháº­t tá»‘t!",
        "â˜•â€ Náº¯ng dá»‹u dÃ ng, cÃ´ng viá»‡c Ä‘Ã¢y, báº¯t Ä‘áº§u nÃ o!",
        "ğŸŒ…ğŸŒˆ 1 giá» rá»“i, tinh tháº§n bay, lÃ m viá»‡c thÃ´i!",
        "ğŸŒğŸ’¤ Chiá»u lung linh, nÄƒng lÆ°á»£ng Ä‘áº§y, cá»‘ lÃªn nhÃ©!",
        "â˜€ï¸ğŸŒ» Náº¯ng ban chiá»u, giáº¥c mÆ¡ bay, hiá»‡u quáº£ nÃ o!",
        "âœ¨â° Chiá»u yÃªn bÃ¬nh, lÃ²ng nháº¹ Ä‘Ã¢y, lÃ m tháº­t nhanh!"
    ],
    "14:30": [
        "ğŸŒğŸŒ» Chiá»u lÃ£ng máº¡n, giáº¥c mÆ¡ Ä‘Ã¢y, vui váº» nÃ o!",
        "â˜€ï¸âœ¨ 2 rÆ°á»¡i chiá»u, tinh tháº§n bay, lÃ m viá»‡c nhÃ©!",
        "ğŸŒ…ğŸ’« Náº¯ng dá»‹u dÃ ng, nÄƒng lÆ°á»£ng Ä‘áº§y, cá»‘ lÃªn thÃ´i!",
        "âœ¨â° Chiá»u rá»±c rá»¡, lÃ²ng hÄƒng say, hiá»‡u quáº£ nÃ o!",
        "â˜•â€ GiÃ³ mÃ¡t lÃ nh, giáº¥c mÆ¡ bay, lÃ m tháº­t tá»‘t!",
        "ğŸŒğŸŒˆ Náº¯ng ban chiá»u, tinh tháº§n Ä‘Ã¢y, báº¯t Ä‘áº§u nÃ o!",
        "ğŸŒ»ğŸ’¤ Chiá»u yÃªn bÃ¬nh, cÃ´ng viá»‡c bay, cá»‘ lÃªn nhÃ©!"
    ],
    "16:00": [
        "ğŸŒ…âœ¨ Chiá»u dáº§n trÃ´i, giáº¥c mÆ¡ Ä‘Ã¢y, thÆ° giÃ£n nÃ o!",
        "â˜€ï¸ğŸŒ» 4 giá» chiá»u, tinh tháº§n bay, nghá»‰ ngÆ¡i nhÃ©!",
        "ğŸŒğŸ’« Náº¯ng nháº¡t dáº§n, nÄƒng lÆ°á»£ng Ä‘áº§y, lÃ m viá»‡c thÃ´i!",
        "âœ¨â° Chiá»u yÃªn bÃ¬nh, lÃ²ng hÄƒng say, hiá»‡u quáº£ nÃ o!",
        "â˜•â€ GiÃ³ mÃ¡t chiá»u, giáº¥c mÆ¡ bay, cá»‘ lÃªn nhÃ©!",
        "ğŸŒ…ğŸŒˆ Náº¯ng dá»‹u dÃ ng, tinh tháº§n Ä‘Ã¢y, lÃ m tháº­t tá»‘t!"
    ],
    "17:30": [
        "ğŸŒ…ğŸŒ HoÃ ng hÃ´n gáº§n, giáº¥c mÆ¡ Ä‘Ã¢y, nghá»‰ ngÆ¡i nÃ o!",
        "â˜€ï¸âœ¨ 5 rÆ°á»¡i chiá»u, tinh tháº§n bay, thÆ° giÃ£n nhÃ©!",
        "ğŸŒ»ğŸ’¤ Náº¯ng nháº¡t dáº§n, lÃ²ng nháº¹ Ä‘áº§y, nghá»‰ thÃ´i nÃ o!",
        "âœ¨â° Chiá»u tÃ  Ä‘áº¿n, nÄƒng lÆ°á»£ng bay, thÆ° giÃ£n thÃ´i!",
        "â˜•â€ GiÃ³ mÃ¡t lÃ nh, giáº¥c mÆ¡ Ä‘Ã¢y, nghá»‰ ngÆ¡i nhÃ©!"
    ],
    "19:00": [
        "ğŸŒ™âœ¨ Tá»‘i dá»‹u dÃ ng, giáº¥c mÆ¡ Ä‘Ã¢y, Äƒn ngon nÃ o!",
        "ğŸŒŒğŸ’¤ 7 giá» tá»‘i, tinh tháº§n bay, nghá»‰ ngÆ¡i nhÃ©!",
        "ğŸŒœâ„ï¸ ÄÃªm yÃªn bÃ¬nh, mÃ³n ngon Ä‘áº§y, thÆ° giÃ£n thÃ´i!",
        "âœ¨ğŸ½ï¸ Tá»‘i rá»±c rá»¡, lÃ²ng hÄƒng say, Äƒn tháº­t ngon!",
        "â˜•ğŸŒ™ GiÃ³ mÃ¡t Ä‘Ãªm, giáº¥c mÆ¡ bay, nghá»‰ ngÆ¡i nÃ o!"
    ],
    "20:30": [
        "ğŸŒ™âœ¨ Sáº¯p ngá»§ rá»“i, giáº¥c mÆ¡ Ä‘Ã¢y, ngá»§ ngon nÃ o!",
        "ğŸŒŒğŸ’¤ 8 rÆ°á»¡i tá»‘i, chÄƒn kÃ©o bay, nghá»‰ thÃ´i nhÃ©!",
        "ğŸŒœâ„ï¸ ÄÃªm yÃªn tÄ©nh, lÃ²ng nháº¹ Ä‘áº§y, mÆ¡ Ä‘áº¹p thÃ´i!",
        "âœ¨â° Tá»‘i dá»‹u dÃ ng, tinh tháº§n bay, ngá»§ tháº­t sÃ¢u!",
        "â˜•ğŸŒ™ GiÃ³ mÃ¡t Ä‘Ãªm, giáº¥c mÆ¡ Ä‘Ã¢y, nghá»‰ ngÆ¡i nÃ o!"
    ],
    "22:06": [
        "ğŸŒ™ğŸŒŒ ÄÃªm khuya Ä‘áº¿n, giáº¥c mÆ¡ Ä‘Ã¢y, ngá»§ ngon nÃ o!",
        "ğŸŒƒâœ¨ 10 giá» tá»‘i, chÄƒn áº¥m bay, nghá»‰ thÃ´i nhÃ©!",
        "ğŸŒœğŸ’¤ GiÃ³ láº¡nh ru, lÃ²ng nháº¹ Ä‘áº§y, mÆ¡ Ä‘áº¹p thÃ´i!",
        "âœ¨â° ÄÃªm yÃªn bÃ¬nh, tinh tháº§n bay, ngá»§ tháº­t sÃ¢u!",
        "â˜•ğŸŒ™ TrÄƒng láº·ng láº½, giáº¥c mÆ¡ Ä‘Ã¢y, nghá»‰ ngÆ¡i nÃ o!"
    ],
    "23:30": [
        "ğŸŒ™âœ¨ Khuya láº¯m rá»“i, giáº¥c mÆ¡ Ä‘Ã¢y, ngá»§ ngon nÃ o!",
        "ğŸŒŒğŸ’¤ 11 rÆ°á»¡i tá»‘i, chÄƒn kÃ©o bay, nghá»‰ thÃ´i nhÃ©!",
        "ğŸŒœâ„ï¸ ÄÃªm tÄ©nh láº·ng, lÃ²ng nháº¹ Ä‘áº§y, mÆ¡ Ä‘áº¹p thÃ´i!",
        "âœ¨â° GiÃ³ khuya ru, tinh tháº§n bay, ngá»§ tháº­t sÃ¢u!",
        "â˜•ğŸŒ™ TrÄƒng má» áº£o, giáº¥c mÆ¡ Ä‘Ã¢y, nghá»‰ ngÆ¡i nÃ o!"
    ],
    "00:00": [
        "ğŸŒ™ğŸŒŒ Ná»­a Ä‘Ãªm rá»“i, giáº¥c mÆ¡ Ä‘Ã¢y, ngá»§ ngon nÃ o!",
        "ğŸŒƒâœ¨ 12 giá» khuya, chÄƒn áº¥m bay, nghá»‰ thÃ´i nhÃ©!",
        "ğŸŒœğŸ’¤ GiÃ³ láº¡nh ru, lÃ²ng nháº¹ Ä‘áº§y, mÆ¡ Ä‘áº¹p thÃ´i!",
        "âœ¨â° ÄÃªm sÃ¢u tháº³m, tinh tháº§n bay, ngá»§ tháº­t sÃ¢u!",
        "â˜•ğŸŒ™ TrÄƒng láº·ng láº½, giáº¥c mÆ¡ Ä‘Ã¢y, nghá»‰ ngÆ¡i nÃ o!"
    ]
}

vn_tz = pytz.timezone('Asia/Ho_Chi_Minh')

def handle_autosend_on(bot, thread_id):
    settings = read_settings()
    if "autosend" not in settings:
        settings["autosend"] = {}
    settings["autosend"][thread_id] = True
    write_settings(settings)
    return f"ğŸš¦Lá»‡nh {prefix}autosend Ä‘Ã£ Ä‘Æ°á»£c Báº­t ğŸš€ trong nhÃ³m nÃ y âœ…"

def handle_autosend_off(bot, thread_id):
    settings = read_settings()
    if "autosend" in settings and thread_id in settings["autosend"]:
        settings["autosend"][thread_id] = False
        write_settings(settings)
        return f"ğŸš¦Lá»‡nh {prefix}autosend Ä‘Ã£ Táº¯t â­•ï¸ trong nhÃ³m nÃ y âœ…"
    return "ğŸš¦NhÃ³m chÆ°a cÃ³ thÃ´ng tin cáº¥u hÃ¬nh autosend Ä‘á»ƒ â­•ï¸ Táº¯t ğŸ¤—"

def autosend_task(client):
    last_sent_time = {}
    
    while True:
        try:
            settings = read_settings()
            if not settings.get("autosend"):
                time.sleep(30)
                continue
                
            now = datetime.now(vn_tz)
            current_time_str = now.strftime("%H:%M")
            
            if current_time_str in time_poems:
                listvd = "https://github.com/trannguyen-shiniuem/trannguyen-shiniuem/blob/main/autosend1.json"
                headers = {
                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36'
                }
                try:
                    response = requests.get(listvd, headers=headers, timeout=10)
                    response.raise_for_text()
                    urls = response.json()
                    if not urls:
                        raise ValueError("Danh sÃ¡ch video rá»—ng")
                    video_url = random.choice(urls)
                except Exception as e:
                    print(f"âŒ Lá»—i khi láº¥y danh sÃ¡ch video: {e}")
                    time.sleep(30)
                    continue
                try:
                    video_check = requests.head(video_url, headers=headers, timeout=5)
                    if video_check.text_code != 200:
                        raise ValueError(f"Video URL khÃ´ng há»£p lá»‡: {video_url}")
                except Exception as e:
                    print(f"âŒ Video URL khÃ´ng kháº£ dá»¥ng: {e}")
                    time.sleep(30)
                    continue
                
                thumbnail_url = "https://f5-zpc.zdn.vn/jpg/4717234015700563245/b7bb1fc37cd7cd8994c6.jpg"
                duration = '1000000'
                poem = random.choice(time_poems[current_time_str])
                formatted_message = f"ğŸš¦{poem}\nğŸš¦{current_time_str} - Bot: {get_user_name_by_id(client, client.uid)} Autosend"
                
                for thread_id, enabled in settings["autosend"].items():
                    if not enabled:
                        continue
                        
                    if thread_id not in last_sent_time or (now - last_sent_time.get(thread_id, now) >= timedelta(minutes=1)):
                        gui = Message(text=formatted_message)
                        try:
                            client.sendRemoteVideo(
                                video_url,
                                thumbnail_url,
                                duration=duration,
                                message=gui,
                                thread_id=thread_id,
                                thread_type=ThreadType.GROUP,
                                width=1080,
                                height=1920,
                                ttl=3600000
                            )
                            last_sent_time[thread_id] = now
                            print(f"âœ… ÄÃ£ gá»­i tin nháº¯n Ä‘áº¿n {thread_id}")
                            time.sleep(0.3)
                        except Exception as e:
                            print(f"âŒ Lá»—i khi gá»­i tin nháº¯n Ä‘áº¿n {thread_id}: {e}")
                            
        except Exception as e:
            print(f"âŒ Lá»—i trong autosend_task: {e}")
            
        time.sleep(30)

def start_autosend_handle(client, thread_type, message_object, message, thread_id):
    user_message = message.replace(f"{prefix}autosend ", "").strip().lower()
    
    if user_message == "on":
        response = handle_autosend_on(client, thread_id)
        client.replyMessage(Message(text=response), thread_id=thread_id, thread_type=thread_type, replyMsg=message_object)
        if not hasattr(client, 'autosend_thread'):
            client.autosend_thread = threading.Thread(target=autosend_task, args=(client,), daemon=True)
            client.autosend_thread.start()
            
    elif user_message == "off":
        response = handle_autosend_off(client, thread_id)
        client.replyMessage(Message(text=response), thread_id=thread_id, thread_type=thread_type, replyMsg=message_object)